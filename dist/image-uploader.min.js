/*! image-uploader 13-11-2021 */

!function(n){"use strict";const a=10485760,r=Math.round(10)+"MB";function e(e={}){const{accessKeyId:r,name:t,url:s,region:o,secretAccessKey:i}={accessKeyId:r,name:t,url:s,region:o,secretAccessKey:i,sizeLimit:a,...e};return n.config.update({accessKeyId:r,secretAccessKey:i,region:o}),this.name=t,this.url=s,this.error=null,this.progress=0,this.bucket=new n.S3({params:{Bucket:t}}),this}e.prototype={validate:function({size:e=-1}){return!e||e<=0?{message:"Invalid or missing file",code:"Invalid File"}:Math.round(parseInt(e,10))>a?{code:"File Too Large",message:`Attachment too big. Max ${r} allowed`}:void 0},setProgress:function(e){this.progress=e},resetProgress:function(){setTimeout(()=>e.prototype.setProgress(0),100)},push:function(e){if(this.error=this.validate(e),this.error)throw new Error(error);var r,{name:t,type:s}=e;const o=encodeURI((r=Math.random().toString(36).substring(2,10),""+Date.now().toString(36)+r+"-"+t)),i={ACL:"public-read",Body:e,Bucket:this.name,ContentType:s,Key:o,ServerSideEncryption:"AES256"};return this.setProgress(0),new Promise((t,s)=>{this.bucket.putObject(i,(e,r)=>{if(this.setProgress(0),e)return this.error=e,s(this.error);e={filename:o,url:""+this.url+o};return t({...r,...e})}).on("httpUploadProgress",({loaded:e,total:r})=>{this.setProgress(Math.round(e/r*100))})})}},window.ImageUploader=e}(window.AWS);
/*! image-uploader 13-11-2021 */

!function(i){"use strict";var e=atob("Y29tLnRoaW5rY3JhenkuaW9uaWNpbWFnZXVwbG9hZA=="),t=atob("aHR0cHM6Ly9zMy5hbWF6b25hd3MuY29tL2NvbS50aGlua2NyYXp5LmlvbmljaW1hZ2V1cGxvYWQv"),r=atob("QUtJQVYzUUEyQ1RVTk03UFBNRVQ="),s=atob("U3hBZ2hBdGVaUXJicVN0N28zdkdOaVBlSVpBR1hnWnhCNE9Sc3d3RQ==");const n="AES256",a={name:e,url:t,region:"us-east-1",accessKeyId:r,secretAccessKey:s,ServerSideEncryption:n},o=10485760,c=Math.round(10)+"MB";function h(e={}){var{accessKeyId:t,name:r,url:s,region:o,secretAccessKey:e}={...a,...e};return i.config.update({accessKeyId:t,secretAccessKey:e,region:o}),this.name=r,this.url=s,this.error=null,this.progress=0,this.bucket=new i.S3({params:{Bucket:r}}),this}h.prototype={validate:function(e){return!e||!e.size||e.size<=0?{message:"Invalid or missing file",code:"Invalid File"}:Math.round(parseInt(e.size,10))>o?{code:"File Too Large",message:`Attachment too big. Max ${c} allowed`}:void 0},setProgress:function(e){this.progress=e},resetProgress:function(){setTimeout(()=>h.prototype.setProgress(0),100)},push:function(e){if(this.error=this.validate(e),this.error)throw new Error(this.error.message);var t,r=e["type"];const o=encodeURI((t=Math.random().toString(36).substring(2,15),""+Date.now().toString(36)+t)),i={ACL:"public-read",Body:e,Bucket:this.name,ContentType:r,Key:o,ServerSideEncryption:n};return this.setProgress(0),new Promise((r,s)=>{this.bucket.putObject(i,(e,t)=>{if(this.setProgress(0),e)return this.error=e,s(this.error);e={filename:o,url:""+this.url+o};return r({...t,...e})}).on("httpUploadProgress",({loaded:e,total:t})=>{this.setProgress(Math.round(e/t*100))})})}},window.ImageUploader=h}(window.AWS);